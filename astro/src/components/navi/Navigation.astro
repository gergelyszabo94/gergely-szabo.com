---
import NavItem from './NavItem.astro';

export interface Props {
	type: string,
}

const { type } = Astro.props;

const mainNav = type === 'index'
    ? [
        {
            href: '#about',
            title: 'About',
            class: 'nav-link js-scroll-trigger'
        },
        {
            href: '#social',
            title: 'Social',
            class: 'nav-link js-scroll-trigger'
        },
        {
            href: '#media',
            title: 'Media',
            class: 'nav-link js-scroll-trigger'
        },
        {
            href: '#gallery',
            title: 'Gallery',
            class: 'nav-link js-scroll-trigger'
        },
        {
            href: '#contact',
            title: 'Contact',
            class: 'nav-link js-scroll-trigger'
        }
    ]
    : [
        {
            href: '/',
            title: 'Landing Page',
            class: 'nav-link js-scroll-trigger'
        }
    ];

const otherNav = [
    {
        href: '/teamspeakserver',
        title: 'TeamSpeak Server',
        class: 'nav-item dropdown-item'
    },
    {
        href: '/trading',
        title: 'Trading',
        class: 'nav-item dropdown-item'
    }
];
---

<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top"
            >Gergely Szabo
        </a>
        <button
            class="navbar-toggler navbar-toggler-right"
            type="button"
            data-toggle="collapse"
            data-target="#navbarResponsive"
            aria-controls="navbarResponsive"
            aria-expanded="false"
            aria-label="Toggle navigation">
            Menu
            <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ms-auto">
                {
                    mainNav.map((nav) => {
                        return (
                            <NavItem
                                href={nav.href}
                                title={nav.title}
                                cl={nav.class}
                            />
                        );
                    })
                }
                <li class="dropdown nav-item">
                    <a class="nav-link dropdown-toggle" id="dropdownMenuButton" data-toggle="dropdown">
                        Other
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        {
                            otherNav.map((nav) => {
                                return (
                                    <NavItem
                                        href={nav.href}
                                        title={nav.title}
                                        cl={nav.class}
                                    />
                                );
                            })
                        }
                        <!-- <li>
                            <a class="nav-item dropdown-item" href="/teamspeakserver">
                                TeamSpeak Server
                            </a>
                        </li>
                        <li>
                            <a class="nav-item dropdown-item" href="/trading">
                                Trading
                            </a>
                        </li> -->
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<script>
    (function($) {
        "use strict";

        // Smooth scrolling using jQuery easing
        $('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function() {
            if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
                var target = $(this.hash);
                target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                if (target.length) {
                    $('html, body').animate({
                        scrollTop: (target.offset().top - 48)
                    }, 1000, "easeInOutExpo");
                    return false;
                }
            }
        });

        // Closes responsive menu when a scroll trigger link is clicked
        $('.js-scroll-trigger').click(function() {
            $('.navbar-collapse').collapse('hide');
        });

        // Activate scrollspy to add active class to navbar items on scroll
        $('body').scrollspy({
            target: '#mainNav',
            offset: 54
        });

        // Collapse the navbar when page is scrolled
        $(window).scroll(function() {
            if ($("#mainNav").offset().top > 100) {
                $("#mainNav").addClass("navbar-shrink");
            } else {
                $("#mainNav").removeClass("navbar-shrink");
            }
        });
    })(jQuery);
</script>

<style is:global>
    #mainNav {
        font-family: 'Montserrat', 'Helvetica Neue', Helvetica, Arial, sans-serif;
        font-weight: 700;
        text-transform: uppercase;
        border: none;
        background: #2C3E50;
    }

    #mainNav a:focus {
        outline: none;
    }

    #mainNav .navbar-brand {
        font-size: 1.1rem;
        color: white;
    }

    #mainNav .navbar-brand.active, #mainNav .navbar-brand:active, #mainNav .navbar-brand:focus, #mainNav .navbar-brand:hover {
        color: white;
    }

    #mainNav .navbar-nav {
        letter-spacing: 1px;
    
    }
    #mainNav .navbar-nav li.nav-item a.nav-link {
        color: white; }

    #mainNav .navbar-nav li.nav-item a.nav-link:hover {
        color: #71BCCE;
        outline: none;
    }

    #mainNav .navbar-nav li.nav-item a.nav-link:active, #mainNav .navbar-nav li.nav-item a.nav-link:focus {
        color: white;
    }

    #mainNav .navbar-toggler {
        font-size: 14px;
        padding: 11px;
        text-transform: uppercase;
        color: white;
        border-color: white;
    }

    #mainNav .navbar-toggler:focus, #mainNav .navbar-toggler:hover {
        color: white;
        border-color: #71BCCE;
        background-color: #71BCCE;
    }

    #mainNav .dropdown-item {
        padding: 0.25rem 1.5rem;
        background: none;
        color: #71BCCE;
        outline: none;
        font-weight: inherit;
    }

    #mainNav .dropdown-item:hover {
        color: black;
        background-color: #edf5f8;
    }

    @media (min-width: 992px) {
        #mainNav {
            padding-top: 25px;
            padding-bottom: 25px;
            -webkit-transition: padding-top 0.3s, padding-bottom 0.3s;
            -moz-transition: padding-top 0.3s, padding-bottom 0.3s;
            transition: padding-top 0.3s, padding-bottom 0.3s;
        
        }

        #mainNav .navbar-brand {
            font-size: 2em;
            -webkit-transition: all 0.3s;
            -moz-transition: all 0.3s;
            transition: all 0.3s;
        
        }

        #mainNav .navbar-nav > li.nav-item > a.nav-link.active {
            color: white;
            border-radius: 3px;
            background: #71BCCE;
        }

        #mainNav .navbar-nav > li.nav-item > a.nav-link.active:active, #mainNav .navbar-nav > li.nav-item > a.nav-link.active:focus, #mainNav .navbar-nav > li.nav-item > a.nav-link.active:hover {
            color: white;
            background: #71BCCE;
        }

        #mainNav.navbar-shrink {
            padding-top: 10px;
            padding-bottom: 10px;
        }

        #mainNav.navbar-shrink .navbar-brand {
            font-size: 1.5em;
        }
    }
</style>
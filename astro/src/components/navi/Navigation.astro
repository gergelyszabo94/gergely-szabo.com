---
import "@fortawesome/fontawesome-free/css/fontawesome.css";
import "@fortawesome/fontawesome-free/css/solid.css";
import NavItem from "./NavItem.astro";

export interface Props {
    type: string;
}

const { type } = Astro.props;

const mainNav =
    type === "index"
        ? [
              {
                  href: "#about",
                  title: "About",
                  class: "nav-link js-scroll-trigger",
              },
              {
                  href: "#social",
                  title: "Social",
                  class: "nav-link js-scroll-trigger",
              },
              {
                  href: "#media",
                  title: "Media",
                  class: "nav-link js-scroll-trigger",
              },
              {
                  href: "#gallery",
                  title: "Gallery",
                  class: "nav-link js-scroll-trigger",
              },
              {
                  href: "#contact",
                  title: "Contact",
                  class: "nav-link js-scroll-trigger",
              },
          ]
        : [
              {
                  href: "/",
                  title: "Landing Page",
                  class: "nav-link",
              },
          ];

const otherNav = [
    {
        href: "/teamspeakserver",
        title: "TeamSpeak Server",
        class: "nav-item dropdown-item",
    },
    {
        href: "/trading",
        title: "Trading",
        class: "nav-item dropdown-item",
    },
];

const brandHref = type === "index" ? "#page-top" : "/";
---

<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
        <a class="navbar-brand js-scroll-trigger" href={brandHref}
            >Gergely Szabo
        </a>
        <button
            class="navbar-toggler navbar-toggler-right"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarResponsive"
            aria-controls="navbarResponsive"
            aria-expanded="false"
            aria-label="Toggle navigation"
        >
            Menu
            <i class="fa fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ms-auto">
                {
                    mainNav.map((nav) => {
                        return (
                            <NavItem
                                href={nav.href}
                                title={nav.title}
                                cl={nav.class}
                            />
                        );
                    })
                }
                <li class="dropdown nav-item">
                    <a
                        class="nav-link dropdown-toggle"
                        id="dropdownMenuButton"
                        data-bs-toggle="dropdown"
                        data-toggle="dropdown"
                    >
                        Other
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        {
                            otherNav.map((nav) => {
                                return (
                                    <NavItem
                                        href={nav.href}
                                        title={nav.title}
                                        cl={nav.class}
                                    />
                                );
                            })
                        }
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<script is:inline>
    window.onscroll = () => {
        const nav = document.getElementById("mainNav");

        if (window.scrollY > 100) nav.classList.add("navbar-shrink");
        else nav.classList.remove("navbar-shrink");
    };
</script>

<style is:global>
    #mainNav {
        font-family: "Montserrat", "Helvetica Neue", Helvetica, Arial,
            sans-serif;
        font-weight: 700;
        text-transform: uppercase;
        border: none;
        background: #2c3e50;
    }

    #mainNav a:focus {
        outline: none;
    }

    #mainNav .navbar-brand {
        font-size: 1.1rem;
        color: white;
    }

    #mainNav .navbar-brand.active,
    #mainNav .navbar-brand:active,
    #mainNav .navbar-brand:focus,
    #mainNav .navbar-brand:hover {
        color: white;
    }

    #mainNav .navbar-nav {
        letter-spacing: 1px;
    }
    #mainNav .navbar-nav li.nav-item a.nav-link {
        color: white;
    }

    #mainNav .navbar-nav li.nav-item a.nav-link:hover {
        color: #71bcce;
        outline: none;
    }

    #mainNav .navbar-nav li.nav-item a.nav-link:active,
    #mainNav .navbar-nav li.nav-item a.nav-link:focus {
        color: white;
    }

    #mainNav .navbar-toggler {
        font-size: 14px;
        padding: 11px;
        text-transform: uppercase;
        color: white;
        border-color: white;
    }

    #mainNav .navbar-toggler:focus,
    #mainNav .navbar-toggler:hover {
        color: white;
        border-color: #71bcce;
        background-color: #71bcce;
    }

    #mainNav .dropdown-item {
        padding: 0.25rem 1.5rem;
        background: none;
        color: #71bcce;
        outline: none;
        font-weight: inherit;
    }

    #mainNav .dropdown-item:hover {
        color: black;
        background-color: #edf5f8;
    }

    @media (min-width: 992px) {
        #mainNav {
            padding-top: 25px;
            padding-bottom: 25px;
            -webkit-transition: padding-top 0.3s, padding-bottom 0.3s;
            -moz-transition: padding-top 0.3s, padding-bottom 0.3s;
            transition: padding-top 0.3s, padding-bottom 0.3s;
        }

        #mainNav .navbar-brand {
            font-size: 2em;
            -webkit-transition: all 0.3s;
            -moz-transition: all 0.3s;
            transition: all 0.3s;
        }

        #mainNav .navbar-nav > li.nav-item > a.nav-link.active {
            color: white;
            border-radius: 3px;
            background: #71bcce;
        }

        #mainNav .navbar-nav > li.nav-item > a.nav-link.active:active,
        #mainNav .navbar-nav > li.nav-item > a.nav-link.active:focus,
        #mainNav .navbar-nav > li.nav-item > a.nav-link.active:hover {
            color: white;
            background: #71bcce;
        }

        #mainNav.navbar-shrink {
            padding-top: 10px;
            padding-bottom: 10px;
        }

        #mainNav.navbar-shrink .navbar-brand {
            font-size: 1.5em;
        }
    }
</style>
